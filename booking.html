<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Book Your Cruise</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
  <style>
/* === GLOBAL === */
body {
  font-family: 'Poppins', sans-serif;
  margin: 0;
  background: #f9fafb;
  color: #002b45;
}

/* === LAYOUT === */
.booking-layout {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 40px;
  padding: 40px 10%;
  max-width: 1300px;
  margin: auto;
  position: relative;
}

/* === LEFT COLUMN (All Steps) === */
.booking-content {
  flex: 2;
}

/* === RIGHT COLUMN (Sticky Summary) === */
.booking-right {
  flex: 1;
  max-width: 500px;              /* ⬅️ πιο φαρδιά */
  position: sticky;
  top: 50px;                     /* ⬅️ κοντά στην κορυφή */
  align-self: flex-start;
  height: fit-content;
  z-index: 100;
}

.booking-summary {
  background: linear-gradient(180deg, #ffffff 0%, #f3f6f9 100%);
  border-radius: 22px;           /* ⬅️ πιο “παχιά” καμπύλη */
  border: 1.5px solid #dde3eb;
  padding: 18px 26px;            /* ⬅️ λίγο πιο άνετα εσωτερικά */
  box-shadow: 0 5px 20px rgba(0, 43, 69, 0.15);
  transition: box-shadow 0.3s ease, transform 0.3s ease;
  font-family: "Poppins", sans-serif;
  font-size: 14px;
  width: 100%;
  max-height: 480px;             /* ⬅️ κάνει την κάρτα “κοντή” */
  overflow-y: auto;              /* scroll αν χρειαστεί */
}

.booking-summary:hover {
  box-shadow: 0 8px 25px rgba(0, 43, 69, 0.25);
  transform: translateY(-2px);
}

/* Τίτλος */
.booking-summary h3 {
  text-align: center;
  font-size: 21px;
  font-weight: 700;
  color: #002b45;
  margin-bottom: 14px;
  border-bottom: 2px solid #ff6600;
  padding-bottom: 6px;
}

/* Εικόνα */
.summary-image img {
  width: 100%;
  height: 120px;                 /* ⬅️ πιο κοντή εικόνα */
  object-fit: cover;
  border-radius: 14px;
  margin-bottom: 12px;
}

/* Ρυθμίσεις περιεχομένου */
.summary-item {
  display: flex;
  justify-content: space-between;
  margin: 5px 0;
  color: #002b45;
  font-size: 14px;
}

.summary-label {
  font-weight: 600;
  color: #001f33;
}

.total {
  text-align: right;
  font-size: 18px;
  font-weight: 700;
  color: #ff6600;
  margin-top: 10px;
  border-top: 2px solid #ff6600;
  padding-top: 10px;
}

/* === PASSENGER FORM === */
.passenger-form {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  padding: 30px;
}

.passenger-form h2 {
  margin-top: 0;
  font-size: 22px;
  color: #002b45;
  text-align: center;
  border-bottom: 2px solid #ff6600;
  padding-bottom: 10px;
}

.form-group {
  display: flex;
  justify-content: space-between;
  gap: 20px;
  margin: 15px 0;
}

label {
  font-weight: 600;
  color: #002b45;
}

select, input[type="date"] {
  width: 100%;
  padding: 8px 10px;
  border: 1px solid #ccc;
  border-radius: 6px;
}

input[type="date"]:invalid {
  border: 1px solid #ff4d4d;
  background: #fff5f5;
}

.passenger-section {
  margin-top: 20px;
  border-top: 1px solid #eee;
  padding-top: 20px;
}

.passenger-item {
  background: #f4f7fa;
  border-radius: 8px;
  padding: 15px;
  margin-bottom: 12px;
}

.passenger-item h4 {
  margin: 0 0 8px 0;
  color: #ff6600;
}

.next-btn {
  display: block;
  margin: 25px auto 0;
  background: #ff6600;
  color: white;
  border: none;
  padding: 12px 30px;
  border-radius: 6px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.3s;
}

.next-btn:hover {
  background: #e05500;
}

/* === CABIN SELECTION === */
.cabin-section {
  max-width: 1200px;
  margin: 60px auto;
  padding: 30px;
  display: flex;
  gap: 40px;
  align-items: flex-start;
  background: #f8f9fb;
  border-radius: 12px;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
  opacity: 0;
  transition: opacity 0.6s ease;
}
.cabin-section.visible { opacity: 1; }

.cabins-container-wrapper { flex: 3; }

.cabin-section h2 {
  text-align: center;
  color: #002b45;
  margin-bottom: 20px;
  border-bottom: 2px solid #ff6600;
  display: inline-block;
  padding-bottom: 4px;
}

.cabins-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 20px;
}

.cabin-card {
  background: white;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 3px 8px rgba(0,0,0,0.1);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.cabin-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

.cabin-images img {
  width: 100%;
  height: 140px;
  object-fit: cover;
  border-radius: 10px 10px 0 0;
}

.cabin-info { padding: 10px 14px; }

.cabin-info h3 {
  font-size: 16px;
  color: #002b45;
  margin: 4px 0;
}

.cabin-info p {
  font-size: 13px;
  color: #444;
  margin: 4px 0 8px 0;
}

.cabin-details {
  list-style: none;
  padding: 0;
  margin: 0 0 10px;
  font-size: 12.5px;
  color: #004c70;
}

.select-cabin-btn {
  width: 100%;
  background: #ff6600;
  color: white;
  border: none;
  border-radius: 6px;
  padding: 8px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s ease;
}
.select-cabin-btn:hover { background: #ff8533; }

/* === DECK SELECTION === */
.deck-section {
  margin-top: 60px;
  padding: 30px;
  background: #f9fafb;
  border-radius: 12px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  text-align: center;
  opacity: 0;
  transition: opacity 0.5s ease;
}
.deck-section.visible { opacity: 1; }

.deck-layout {
  display: flex;
  justify-content: center;
  gap: 25px;
  margin-top: 25px;
  flex-wrap: wrap;
}

.deck-left {
  background: #ffffff;
  border-radius: 10px;
  box-shadow: 0 1px 6px rgba(0,0,0,0.1);
  padding: 15px;
  width: 200px;
  text-align: left;
  font-size: 13px;
}

.deck-label {
  font-weight: 600;
  color: #002b45;
  margin-bottom: 6px;
  font-size: 13px;
}

.deck-select {
  width: 100%;
  padding: 6px 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
  margin-bottom: 12px;
  font-size: 13px;
}

.cabin-radio-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-bottom: 12px;
}

.cabin-radio-list label {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 5px 8px;
  background: #f5f7fa;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.2s;
  font-size: 13px;
}
.cabin-radio-list label:hover { background: #eaf3ff; }

.select-cabin-final {
  width: 100%;
  background: linear-gradient(135deg, #ff7b00, #ff6600);
  color: white;
  border: none;
  border-radius: 6px;
  padding: 8px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.25s ease;
  box-shadow: 0 2px 6px rgba(255, 102, 0, 0.3);
}
.select-cabin-final:hover {
  background: linear-gradient(135deg, #ff8a1f, #ff6e00);
  transform: translateY(-1px);
}

/* === Deck Image (scrollable) === */
.deck-right {
  position: relative;
  width: 520px;
  max-width: 100%;
  height: 400px;
  overflow-y: auto;
  border-radius: 10px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.2);
  background: white;
}
.deck-right img {
  width: 100%;
  display: block;
  border-radius: 10px;
}

/* === EXCURSIONS === */
.excursions-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 20px;
  margin-top: 25px;
}

.excursion-card {
  background: white;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 3px 8px rgba(0,0,0,0.1);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.excursion-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

.excursion-img {
  width: 100%;
  height: 120px;
  object-fit: cover;
}

.excursion-info { padding: 10px 12px; }
.excursion-info h3 {
  font-size: 14.5px;
  color: #002b45;
  margin: 4px 0;
  height: 34px;
  overflow: hidden;
}
.excursion-info p {
  font-size: 12.5px;
  color: #555;
  margin: 4px 0 8px 0;
  height: 40px;
  overflow: hidden;
}

.excursion-prices {
  font-size: 12.5px;
  color: #004c70;
  display: flex;
  justify-content: space-between;
  margin-bottom: 6px;
}

/* Excursion Button (one unified version) */
.select-excursion {
  width: 100%;
  background: linear-gradient(135deg, #ff7b00, #ff6600);
  color: white;
  border: none;
  border-radius: 8px;
  padding: 10px 0;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.25s ease;
  box-shadow: 0 2px 6px rgba(255, 102, 0, 0.3);
  letter-spacing: 0.3px;
}
.select-excursion:hover {
  background: linear-gradient(135deg, #ff8a1f, #ff6e00);
  box-shadow: 0 3px 8px rgba(255, 102, 0, 0.4);
  transform: translateY(-2px);
}
.select-excursion:active {
  transform: scale(0.97);
  background: linear-gradient(135deg, #e05500, #ff6600);
}
.select-excursion.selected {
  background: linear-gradient(135deg, #004c70, #006b9b);
  box-shadow: 0 3px 8px rgba(0, 76, 112, 0.4);
}
.select-excursion.selected:hover {
  background: linear-gradient(135deg, #006b9b, #004c70);
}

/* === RESPONSIVE === */
@media (max-width: 900px) {
  .booking-layout { flex-direction: column; }
  .booking-right {
    position: static;
    max-width: 100%;
    margin-top: 30px;
  }
  .cabin-section { flex-direction: column; }
}
/* === Passenger Details Section === */
.passenger-details-section {
  max-width: 1200px;
  margin: 60px auto;
  padding: 30px;
  background: #ffffff;
  border-radius: 12px;
  box-shadow: 0 3px 12px rgba(0,0,0,0.1);
  text-align: center;
  display: none;
}

.passenger-details-section h2 {
  color: #002b45;
  border-bottom: 2px solid #ff6600;
  display: inline-block;
  padding-bottom: 6px;
  margin-bottom: 10px;
}

.passenger-card {
  background: #f8f9fb;
  border-radius: 10px;
  padding: 20px;
  margin: 20px 0;
  box-shadow: 0 1px 6px rgba(0,0,0,0.1);
  text-align: left;
}

.passenger-card h3 {
  color: #ff6600;
  margin-top: 0;
  font-size: 18px;
}

.passenger-fields {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 15px;
}

.passenger-fields label {
  display: block;
  font-weight: 600;
  color: #002b45;
  margin-bottom: 4px;
}

.passenger-fields input,
.passenger-fields select {
  width: 100%;
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
}

.submit-booking-btn {
  margin-top: 30px;
  background: linear-gradient(135deg, #ff7b00, #ff6600);
  color: white;
  border: none;
  border-radius: 8px;
  padding: 12px 30px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.25s ease;
}
.submit-booking-btn:hover {
  background: linear-gradient(135deg, #ff8a1f, #ff6e00);
  transform: translateY(-2px);
}

/* === FIX: Date input να μη ξεχειλίζει === */
input[type="date"] {
  box-sizing: border-box;     /* μετρά padding και border στο συνολικό πλάτος */
  width: 100%;                /* δεν θα ξεπερνά ποτέ το container */
  padding-right: 8px;         /* μικρό περιθώριο δεξιά για το εικονίδιο */
  border: 1px solid #ccc;
  border-radius: 6px;
  font-family: inherit;
  font-size: 14px;
}

/* Προαιρετικά, για να μικρύνει λίγο το εικονίδιο του ημερολογίου */
input[type="date"]::-webkit-calendar-picker-indicator {
  padding: 0;
  margin-right: 4px;
  cursor: pointer;
}



  </style>
</head>
<body>

<header>
  <nav class="navbar">
    <div class="logo">CruiseTheGreek.com</div>
        <!-- Αυτό το κουμπί θα φαίνεται μόνο σε κινητά -->
    <button class="menu-toggle" aria-label="Toggle Menu">
      <i class="fa-solid fa-bars"></i>
    </button>
    <ul class="nav-links">
      <li><a href="index.html">HOME</a></li>
      <li><a href="results.html?type=cruise_only">CRUISES</a></li>
      <li><a href="results.html?type=cruise_package">CRUISE PACKAGES</a></li>
      <li><a href="tours.html">TOURS</a></li>
      <li><a href="ships.html">CRUISE SHIPS</a></li>
      <li><a href="destinations.html">DESTINATIONS</a></li>
      <li><a href="contact.html">CONTACT</a></li>
      <li><a href="faqs.html">FAQ</a></li>
      <li><a href="blog.html">BLOG</a></li>
    </ul>
  </nav>
</header>
<!-- ===== MAIN BOOKING SECTION ===== -->
<div class="booking-layout">
  <!-- Left Column -->
  <div class="booking-content">
    <!-- === Passengers Section === -->
    <div class="booking-container">
      <div class="passenger-form">
        <h2>Passengers</h2>
        <div class="form-group">
          <div style="flex:1;">
            <label for="adults">Adults</label>
            <select id="adults">
              <option value="1">1 Adult</option>
              <option value="2" selected>2 Adults</option>
              <option value="3">3 Adults</option>
              <option value="4">4 Adults</option>
            </select>
          </div>
          <div style="flex:1;">
            <label for="children">Children</label>
            <select id="children">
              <option value="0" selected>0 Children</option>
              <option value="1">1 Child</option>
              <option value="2">2 Children</option>
              <option value="3">3 Children</option>
            </select>
          </div>
        </div>

        <div class="passenger-section" id="passengerFields"></div>
        <button class="next-btn" id="nextStep">Continue</button>
      </div>
    </div>

    <!-- === Cabins Section === -->
    <section id="cabinSection" class="cabin-section" style="display:none;">
      <div class="cabins-container-wrapper">
        <h2>Choose Cabin</h2>
        <div id="cabinsContainer" class="cabins-grid"></div>
      </div>
    </section>

    <!-- === Deck Selection Section === -->
    <section id="deckSection" class="deck-section" style="display:none;">
      <h2>2b Choose your cabin</h2>
      <p style="font-weight:600;">(Choose your desired cabin)</p>

      <div class="deck-layout">
        <div class="deck-left">
          <label for="deckSelect" class="deck-label">Choose Deck:</label>
          <select id="deckSelect" class="deck-select"></select>

          <div id="cabinRadioList" class="cabin-radio-list"></div>

          <button id="confirmCabinBtn" class="select-cabin-final">Continue</button>
        </div>

        <div class="deck-right">
          <img id="deckImage" src="" alt="Deck Plan" class="deckplan-img">
        </div>
      </div>
    </section>

    <!-- === Excursions Section === -->
    <section id="excursionsSection" class="excursions-section" style="display:none;">
      <h2>3. Choose Excursion</h2>
      <p>Choose one or more excursions for your destinations!</p>

      <div id="excursionsContainer" class="excursions-grid"></div>

      <button id="confirmExcursionsBtn" class="confirm-excursions-btn">Continue</button>
    </section>

      <!-- ===== PASSENGER DETAILS FORM SECTION ===== -->
<section id="passengerDetailsSection" class="passenger-details-section" style="display:none;">
  <h2>4. Passenger Information</h2>
  <p>Please fill in the personal and contact details for all passengers.</p>

  <form id="passengerDetailsForm">
    <div id="passengerDetailsContainer"></div>
    <button type="submit" class="submit-booking-btn">Complete Booking</button>
  </form>
</section>

  </div>



  <!-- Right Column (Sticky Summary) -->
  <div class="booking-right">
    <div class="booking-summary" id="bookingSummary">
      <h3>My booking</h3>
      <div class="summary-image"></div>
      <div class="summary-item"><span class="summary-label">Cruise:</span> <span id="summaryTitle">–</span></div>
      <div class="summary-item"><span class="summary-label">Departure:</span> <span id="summaryDate">–</span></div>
      <div class="summary-item"><span class="summary-label">Duration:</span> <span id="summaryDuration">–</span></div>
      <div class="summary-item"><span class="summary-label">Leaving from:</span> <span id="summaryDeparture">–</span></div>
      <div class="summary-item"><span class="summary-label">Arriving to:</span> <span id="summaryArrival">–</span></div>
      <div class="summary-item"><span class="summary-label">Destinations:</span> <span id="summaryDestinations">–</span></div>
      <div class="summary-item"><span class="summary-label">Ship:</span> <span id="summaryShip">–</span></div>
      <div class="summary-item"><span class="summary-label">Price per Person:</span> <span id="summaryBase">–</span></div>
      <hr>
      <div class="summary-item"><span class="summary-label">Adults:</span> <span id="summaryAdults">2</span></div>
      <div class="summary-item"><span class="summary-label">Children:</span> <span id="summaryChildren">0</span></div>
      <div class="total">Total: <span id="summaryTotal">€0</span></div>
    </div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const bookButtons = document.querySelectorAll(".book-btn, .floating-book-btn");

  bookButtons.forEach(btn => {
    btn.addEventListener("click", () => {
      // Κρατά μόνο το όνομα του πακέτου
      const selected = localStorage.getItem("selectedPackage");
      if (selected) localStorage.setItem("bookingPackage", selected);

      // 🧹 Καθαρισμός παλιών δεδομένων κράτησης
      const keysToClear = [
        "selectedCabin",
        "selectedExcursions",
        "bookingPassengers",
        "bookingSummary",
        "selectedDeck",
        "selectedShip"
      ];
      keysToClear.forEach(k => localStorage.removeItem(k));

      // Μετάβαση στη σελίδα κράτησης
      window.location.href = "booking.html";
    });
  });
});
</script>



<script>
// === Passenger form logic ===
const adultsSelect = document.getElementById('adults');
const childrenSelect = document.getElementById('children');
const passengerFields = document.getElementById('passengerFields');
const summary = {
  title: document.getElementById('summaryTitle'),
  date: document.getElementById('summaryDate'),
  adults: document.getElementById('summaryAdults'),
  children: document.getElementById('summaryChildren'),
  total: document.getElementById('summaryTotal')
};

const cruiseTitle = localStorage.getItem("selectedCruise") || localStorage.getItem("selectedPackage") || "Cruise";
const cruiseDate = localStorage.getItem("selectedDate") || "–";
summary.title.textContent = cruiseTitle;
summary.date.textContent = cruiseDate;

function updateSummary() {
  const adults = parseInt(adultsSelect.value);
  const children = parseInt(childrenSelect.value);
  summary.adults.textContent = adults;
  summary.children.textContent = children;
  const total = adults * 300 + children * 150;
  summary.total.textContent = `€${total}`;
}

function generatePassengerFields() {
  passengerFields.innerHTML = "";
  const adults = parseInt(adultsSelect.value);
  const children = parseInt(childrenSelect.value);
  for (let i = 1; i <= adults; i++) {
    passengerFields.insertAdjacentHTML("beforeend", `<div class="passenger-item"><h4>Adult ${i}</h4><label>Date of Birth</label><input type="date" required></div>`);
  }
  for (let i = 1; i <= children; i++) {
    passengerFields.insertAdjacentHTML("beforeend", `<div class="passenger-item"><h4>Child ${i}</h4><label>Date of Birth</label><input type="date" required></div>`);
  }
  updateSummary();
}

adultsSelect.addEventListener("change", generatePassengerFields);
childrenSelect.addEventListener("change", generatePassengerFields);
generatePassengerFields();
</script>
<script>
// === Load cruise info & initialize summary ===
document.addEventListener("DOMContentLoaded", () => {
      localStorage.removeItem("selectedExcursions");
  localStorage.removeItem("selectedCabin");
  localStorage.removeItem("selectedCabinNumber");
  const selectedTitle = localStorage.getItem("selectedCruise") || localStorage.getItem("selectedPackage");
  const selectedDate = localStorage.getItem("selectedDate") || "–";
  const summaryEls = {
    title: document.getElementById("summaryTitle"),
     ship: document.getElementById("summaryShip"),
    date: document.getElementById("summaryDate"),
    duration: document.getElementById("summaryDuration"),
    departure: document.getElementById("summaryDeparture"),
    arrival: document.getElementById("summaryArrival"),
    destinations: document.getElementById("summaryDestinations"),
    base: document.getElementById("summaryBase"),
    adults: document.getElementById("summaryAdults"),
    children: document.getElementById("summaryChildren"),
    total: document.getElementById("summaryTotal")
  };

  if (!selectedTitle) return;

  const isPackage = selectedTitle.toLowerCase().includes("package");
  const jsonFile = isPackage ? "data/packages.json" : "data/cruises.json";

  let basePrice = 0;
  let cabinPrice = 0;

  // === Load cruise data ===
  fetch(jsonFile)
    .then(res => res.json())
    .then(data => {
      const cruise = Object.values(data).find(item => item.title === selectedTitle);
      if (!cruise) return;

      summaryEls.title.textContent = cruise.title;
       summaryEls.ship.textContent = cruise.ship || "–"; 
      summaryEls.date.textContent = selectedDate;
      summaryEls.duration.textContent = cruise.duration || "–";
      summaryEls.departure.textContent = cruise.departure || "–";
      summaryEls.arrival.textContent = cruise.arrival || "–";
      summaryEls.destinations.textContent = cruise.destinations || "–";
      summaryEls.base.textContent = cruise.priceNew || "–";

      if (cruise.image) {
        document.querySelector(".summary-image").innerHTML =
          `<img src="${cruise.image}" alt="${cruise.title}">`;
      }

      basePrice = parseFloat((cruise.priceNew || "0").replace(/[^\d.]/g, "")) || 0;
      updateTotal();
    });

  // === Update total dynamically ===
  function updateTotal() {
    const adults = parseInt(document.getElementById("adults").value);
    const children = parseInt(document.getElementById("children").value);
    const total = basePrice * (adults + children) + cabinPrice;
    summaryEls.adults.textContent = adults;
    summaryEls.children.textContent = children;
    summaryEls.total.textContent = `€${total.toFixed(2)}`;
  }

  document.getElementById("adults").addEventListener("change", updateTotal);
  document.getElementById("children").addEventListener("change", updateTotal);

  // === Continue button -> Show cabins ===
  const continueBtn = document.querySelector(".next-btn");
  const cabinSection = document.getElementById("cabinSection");
  const cabinsContainer = document.getElementById("cabinsContainer");

  continueBtn.addEventListener("click", () => {
    // Έλεγχος αν όλα τα πεδία ημερομηνίας έχουν συμπληρωθεί
const allDates = passengerFields.querySelectorAll('input[type="date"]');
for (const date of allDates) {
  if (!date.value) {
    alert("Παρακαλώ συμπληρώστε όλες τις ημερομηνίες γέννησης πριν συνεχίσετε!");
    date.focus();
    return;
  }
}

    cabinSection.style.display = "block";
    setTimeout(() => cabinSection.classList.add("visible"), 50);
    cabinSection.scrollIntoView({ behavior: "smooth" });

    const shipName = localStorage.getItem("selectedShip");
    if (!shipName) {
      cabinsContainer.innerHTML = "<p style='color:red;'>Δεν υπάρχει διαθέσιμο πλοίο.</p>";
      return;
    }

fetch("data/cabins.json")
  .then(res => res.json())
  .then(data => {
    const cabins = data[shipName];
    if (!cabins) {
      cabinsContainer.innerHTML = "<p style='color:#666;'>No available cabins.</p>";
      return;
    }

    cabinsContainer.innerHTML = "";
    cabins.forEach(cabin => {
      const details = Object.entries(cabin.details)
        .map(([k, v]) => `<li><strong>${k}:</strong> ${v}</li>`)
        .join("");

      // ✅ ΜΟΝΟ η πρώτη εικόνα
      const firstImage = cabin.images && cabin.images.length > 0 
        ? cabin.images[0] 
        : "images/default-cabin.jpg";

      const card = document.createElement("div");
      card.className = "cabin-card";
      card.innerHTML = `
        <div class="cabin-images">
          <img src="${firstImage}" alt="${cabin.name}">
        </div>
        <div class="cabin-info">
          <h3>${cabin.name}</h3>
          <p>${cabin.desc}</p>
          <ul class="cabin-details">${details}</ul>
          <button class="select-cabin-btn" data-cabin='${JSON.stringify(cabin)}'>Select</button>
        </div>
      `;
      cabinsContainer.appendChild(card);
    });
  });

  });

  // === Select cabin & update main summary ===
  document.addEventListener("click", (e) => {
    const btn = e.target.closest(".select-cabin-btn");
    if (!btn) return;

    document.querySelectorAll(".cabin-card").forEach(c => c.style.outline = "none");
    const card = btn.closest(".cabin-card");
    card.style.outline = "3px solid #ff6600";

    const cabin = JSON.parse(btn.dataset.cabin);
    localStorage.setItem("selectedCabin", cabin.name);

    // --- Προσθήκη στο summary ---
    let cabinRow = document.getElementById("summaryCabin");
    if (!cabinRow) {
      const hr = document.createElement("hr");
      const row = document.createElement("div");
      row.className = "summary-item";
      row.id = "summaryCabin";
      row.innerHTML = `<span class="summary-label">Cabin:</span> <span>${cabin.name}</span>`;
      document.querySelector(".booking-summary hr").insertAdjacentElement("afterend", hr);
      document.querySelector(".booking-summary hr").insertAdjacentElement("afterend", row);
    } else {
      cabinRow.querySelector("span:last-child").textContent = cabin.name;
    }

    // --- Αν έχει τιμή στο cabin.json, πρόσθεσέ τη ---
    cabinPrice = parseFloat((cabin.price || "0").replace(/[^\d.]/g, "")) || 0;
    updateTotal();
  });
});
</script>

<script>
// === Μετά την επιλογή τύπου καμπίνας -> deck section ===
document.addEventListener("click", (e) => {
  const btn = e.target.closest(".select-cabin-btn");
  if (!btn) return;

  const deckSection = document.getElementById("deckSection");
  const deckSelect = document.getElementById("deckSelect");
  const cabinRadioList = document.getElementById("cabinRadioList");
  const deckImage = document.getElementById("deckImage");

  deckSection.style.display = "block";
  setTimeout(() => deckSection.classList.add("visible"), 50);
  deckSection.scrollIntoView({ behavior: "smooth" });

  const shipName = localStorage.getItem("selectedShip");
  if (!shipName) {
    deckSelect.innerHTML = "<option>❌ Δεν υπάρχει διαθέσιμο πλοίο</option>";
    return;
  }

  // === Fetch decks from ship_data.json ===
  fetch("data/ships_data.json")
    .then(res => res.json())
    .then(data => {
      const ship = data[shipName];
      if (!ship || !ship.decks) {
        deckSelect.innerHTML = "<option>Δεν υπάρχουν διαθέσιμα decks</option>";
        return;
      }

      // Populate deck dropdown
      deckSelect.innerHTML = ship.decks
        .map((d, i) => `<option value="${d.image}" ${i===0 ? "selected" : ""}>${d.name}</option>`)
        .join("");

      // Show first deck by default
      deckImage.src = ship.decks[0].image;
      loadCabinsForDeck(ship.decks[0].name);

      deckSelect.addEventListener("change", (ev) => {
        const selectedImg = ev.target.value;
        deckImage.src = selectedImg;
        loadCabinsForDeck(ev.target.options[ev.target.selectedIndex].text);
      });
    });

  // === Simulate static cabin list ===
  function loadCabinsForDeck(deckName) {
    cabinRadioList.innerHTML = `
      <label><input type="radio" name="cabinNumber" value="4179">4179</label>
      <label><input type="radio" name="cabinNumber" value="4186">4186</label>
      <label><input type="radio" name="cabinNumber" value="4187">4187</label>
      <label><input type="radio" name="cabinNumber" value="4190">4190</label>
    `;
  }
});

// === Επιβεβαίωση επιλογής καμπίνας ===
document.addEventListener("click", (e) => {
  if (e.target.id !== "confirmCabinBtn") return;

  const selectedCabin = document.querySelector('input[name="cabinNumber"]:checked');
  if (!selectedCabin) {
    alert("Please choose a cabin first");
    return;
  }

  const cabinNumber = selectedCabin.value;
  localStorage.setItem("selectedCabinNumber", cabinNumber);

  // Update summary
  let numberRow = document.getElementById("summaryCabinNumber");
  if (!numberRow) {
    const row = document.createElement("div");
    row.className = "summary-item";
    row.id = "summaryCabinNumber";
    row.innerHTML = `<span class="summary-label">Νο. Καμπίνας:</span> <span>${cabinNumber}</span>`;
    document.querySelector(".booking-summary .total").insertAdjacentElement("beforebegin", row);
  } else {
    numberRow.querySelector("span:last-child").textContent = cabinNumber;
  }


});
</script>

<script>
// === Όταν επιβεβαιωθεί αριθμός καμπίνας ===
document.addEventListener("click", async (e) => {
  if (e.target.id !== "confirmCabinBtn") return;

  const selectedCabin = document.querySelector('input[name="cabinNumber"]:checked');
  if (!selectedCabin) {
    return;
  }

  const cabinNumber = selectedCabin.value;
  localStorage.setItem("selectedCabinNumber", cabinNumber);

  // ➤ Ενημέρωση summary
  let numberRow = document.getElementById("summaryCabinNumber");
  if (!numberRow) {
    const row = document.createElement("div");
    row.className = "summary-item";
    row.id = "summaryCabinNumber";
    row.innerHTML = `<span class="summary-label">Νο. Καμπίνας:</span> <span>${cabinNumber}</span>`;
    document.querySelector(".booking-summary .total").insertAdjacentElement("beforebegin", row);
  } else {
    numberRow.querySelector("span:last-child").textContent = cabinNumber;
  }

  // ➤ Εμφάνιση εκδρομών ΜΟΝΟ τώρα
  const excursionsSection = document.getElementById("excursionsSection");
  const excursionsContainer = document.getElementById("excursionsContainer");
  excursionsSection.style.display = "block";
  excursionsSection.scrollIntoView({ behavior: "smooth" });

  const shipName = document.getElementById("summaryShip")?.textContent.trim();
  const routeText = document.getElementById("summaryDestinations")?.textContent || "";
  const routeStops = routeText.split(/→|,/).map(d => d.trim()).filter(Boolean);

  if (!shipName || shipName === "–") {
    excursionsContainer.innerHTML = "<p style='color:red;'>❌ Δεν βρέθηκε όνομα πλοίου.</p>";
    return;
  }

  try {
    const res = await fetch("data/excursions.json");
    const data = await res.json();
    const shipExcursions = data[shipName];

    if (!shipExcursions) {
      excursionsContainer.innerHTML = `<p style='color:#666;'>Δεν υπάρχουν εκδρομές για το πλοίο <strong>${shipName}</strong>.</p>`;
      return;
    }

    // ➤ Εμφάνιση όλων των εκδρομών που αντιστοιχούν σε κάποιο προορισμό του route
    const matchedExcursions = [];
    routeStops.forEach(stop => {
      const destExc = shipExcursions[stop];
      if (destExc && destExc.length > 0) {
        matchedExcursions.push(...destExc.map(exc => ({ ...exc, destination: stop })));
      }
    });

    if (matchedExcursions.length === 0) {
      excursionsContainer.innerHTML = `<p style='color:#666;'>Δεν υπάρχουν διαθέσιμες εκδρομές για τους προορισμούς αυτής της διαδρομής.</p>`;
      return;
    }

    // ➤ Δημιουργία καρτών
    excursionsContainer.innerHTML = "";
    matchedExcursions.forEach(exc => {
      const card = document.createElement("div");
      card.className = "excursion-card";
      card.innerHTML = `
        <img src="${exc.image}" alt="${exc.title}" class="excursion-img">
        <div class="excursion-info">
          <h3>${exc.title}</h3>
          <p>${exc.desc}</p>
          <div class="excursion-prices">
            <span>${exc.destination}</span>
            <span>${exc.priceAdults} / ${exc.priceChildren}</span>
          </div>
          <button class="select-excursion">Select</button>
        </div>
      `;
      excursionsContainer.appendChild(card);
    });

  } catch (err) {
    excursionsContainer.innerHTML = `<p style='color:red;'>Σφάλμα: ${err.message}</p>`;
  }
});

// === Επιλογή / Αποεπιλογή εκδρομής ===
document.addEventListener("click", (e) => {
  const btn = e.target.closest(".select-excursion");
  if (!btn) return;
  btn.classList.toggle("selected");
  const title = btn.closest(".excursion-card").querySelector("h3").textContent;
  let selectedExcursions = JSON.parse(localStorage.getItem("selectedExcursions") || "[]");
  if (btn.classList.contains("selected")) {
    selectedExcursions.push(title);
  } else {
    selectedExcursions = selectedExcursions.filter(t => t !== title);
  }
  localStorage.setItem("selectedExcursions", JSON.stringify(selectedExcursions));
});

// === Επιβεβαίωση εκδρομών ===
document.addEventListener("click", (e) => {
  if (e.target.id !== "confirmExcursionsBtn") return;

  const selected = JSON.parse(localStorage.getItem("selectedExcursions") || "[]");
  if (selected.length === 0) {
    alert("Παρακαλώ επιλέξτε τουλάχιστον μία εκδρομή!");
    return;
  }

  // === Ενημέρωση Summary ===
  let row = document.getElementById("summaryExcursions");
  const summary = document.querySelector(".booking-summary .total");
  if (!row) {
    row = document.createElement("div");
    row.className = "summary-item";
    row.id = "summaryExcursions";
    row.innerHTML = `<span class="summary-label">Εκδρομές:</span> <span>${selected.join(", ")}</span>`;
    summary.insertAdjacentElement("beforebegin", row);
  } else {
    row.querySelector("span:last-child").textContent = selected.join(", ");
  }

  // === Εμφάνιση φόρμας επιβατών ===
  const section = document.getElementById("passengerDetailsSection");
  const container = document.getElementById("passengerDetailsContainer");
  section.style.display = "block";
  setTimeout(() => section.classList.add("visible"), 50);
  section.scrollIntoView({ behavior: "smooth" });

  // === Δημιουργία φορμών για κάθε επιβάτη ===
  const adults = parseInt(document.getElementById("adults").value);
  const children = parseInt(document.getElementById("children").value);
  const total = adults + children;
  container.innerHTML = "";

  for (let i = 1; i <= total; i++) {
  container.insertAdjacentHTML(
    "beforeend",
    `
    <div class="passenger-card">
      <h3>Επιβάτης ${i}</h3>
      <div class="passenger-fields">
        <div>
          <label>Όνομα</label>
          <input type="text" required>
        </div>
        <div>
          <label>Επώνυμο</label>
          <input type="text" required>
        </div>
        <div>
          <label>Φύλο</label>
          <select required>
            <option value="">Επιλέξτε...</option>
            <option>Άνδρας</option>
            <option>Γυναίκα</option>
            <option>Άλλο</option>
          </select>
        </div>
        <div>
          <label>Ημερομηνία Γέννησης</label>
          <input type="date" required>
        </div>
        <div>
          <label>Εθνικότητα</label>
          <input type="text" required>
        </div>
        <div>
          <label>Χώρα</label>
          <input type="text" required>
        </div>
        <div>
  <label>Τηλέφωνο</label>
  <div class="phone-field">
    <select class="phone-prefix" required>
      <option value="+30" selected>🇬🇷 +30</option>
      <option value="+33">🇫🇷 +33</option>
      <option value="+39">🇮🇹 +39</option>
      <option value="+34">🇪🇸 +34</option>
      <option value="+44">🇬🇧 +44</option>
      <option value="+49">🇩🇪 +49</option>
      <option value="+1">🇺🇸 +1</option>
      <option value="+90">🇹🇷 +90</option>
      <option value="+357">🇨🇾 +357</option>
    </select>
    <input 
      type="tel" 
      class="phone-number" 
      placeholder="+30 69XXXXXXXX" 
      required>
  </div>
</div>

        </div>
        <div>
          <label>Email</label>
          <input type="email" placeholder="example@mail.com" required>
        </div>
      </div>
    </div>
    `
  );
}


  // === Αφαίρεση προηγούμενου alert ===
  alert(`✅ Επιλέχθηκαν ${selected.length} εκδρομές! Συμπληρώστε τα στοιχεία επιβατών για να ολοκληρώσετε την κράτηση.`);
});

</script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const toggleBtn = document.querySelector(".menu-toggle");
    const navLinks = document.querySelector(".nav-links");

    toggleBtn.addEventListener("click", () => {
      navLinks.classList.toggle("active");
    });
  });
</script>



</body>
</html>
